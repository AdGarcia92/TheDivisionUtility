using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using DevExpress.Mvvm;
using PostSharp.Patterns.Model;
using Prism.Events;
using SQLite;
using TheDivisionUtility.TheDivision.Gear.Contracts.Enums;
using TheDivisionUtility.TheDivision.Gear.Contracts.Events;
using TheDivisionUtility.TheDivision.Gear.Contracts.ValueObjects;
using TheDivisionUtility.TheDivision.Gear.Module.Models;

namespace TheDivisionUtility.TheDivision.Gear.Module.ViewModels
{
    [NotifyPropertyChanged]
    public class StaticGearFilterViewModel
    {
        private readonly IEventAggregator _eventAggregator;

        private GearTypes SelectedGearType { get; set; }

        public StaticGearFilterViewModel(IEventAggregator eventAggregator)
        {
            _eventAggregator = eventAggregator;

            _eventAggregator.GetEvent<UpdateFiltersEvent>().Subscribe(UpdateFilters);

            SelectedGearType = GearTypes.Chest;

            var folder = Environment.GetFolderPath(Environment.SpecialFolder.Personal);

            using (var conn = new SQLiteConnection(System.IO.Path.Combine(folder, "Gear2.db")))
            {
                var query = conn.Table<GearPiece>();

                GearTypeFilters = new ObservableCollection<GearFilterItem>
                {
                    new GearFilterItem(query.Count(), "All", null, string.Empty),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Chest), "Body Armor", GearTypes.Chest, "m 559.07744 133.66302 c -0.79525 0.031 -1.45112 0.1397 -1.94726 0.3301 -6.81615 2.6156 -37.92421 88.7045 -33.56445 92.8867 1.12465 1.0789 11.67952 5.9666 23.45703 10.8614 11.77752 4.8948 22.60764 7.8676 24.0664 6.6074 1.4587 -1.2602 11.52289 -22.2053 22.36524 -46.5449 l 19.71484 -44.2539 -24.41211 -11.1641 c -11.74786 -5.3723 -24.11294 -8.9361 -29.67969 -8.7227 z m -379.13086 0.5957 c -6.03342 -0.031 -15.8739 2.2729 -27.0039 6.5235 l -27.55858 10.5234 15.57811 34.7735 c 8.56827 19.1245 17.98438 40.8691 20.92383 48.3222 5.18907 13.1572 6.01702 13.2715 28.51953 3.9453 12.74698 -5.283 24.14881 -10.5169 25.33594 -11.6308 3.01967 -2.8334 -23.96558 -84.1802 -30.16407 -90.9297 -0.93202 -1.0149 -2.88839 -1.5131 -5.63086 -1.5274 z m 50.22071 4.5684 c -3.44112 -0.066 -7.14131 1.3926 -11.41992 4.1152 -5.15325 3.2793 -3.22212 16.6355 7.11718 49.2461 10.05342 31.709 12.11298 45.5055 7.07032 47.3457 -3.91394 1.4283 -22.72762 7.9093 -41.8086 14.4024 l -34.69336 11.8066 -19.60742 -44.6172 c -16.34294 -37.1881 -21.60337 -44.0934 -31.59569 -41.4804 -6.593537 1.7243 -13.228617 6.365 -14.744137 10.3144 -1.51552 3.9494 7.53479 37.2946 20.111327 74.0996 18.17454 53.1874 22.92693 76.3335 23.1582 112.8047 0.27039 42.6385 -1.33309 48.4939 -22.65234 82.7168 -20.116197 32.2917 -22.943357 41.5262 -22.943357 74.9473 l 0 38.1172 -24.472665 0 -24.47266 0 0 39.7695 0 39.7676 64.240242 0 64.24217 0 0 -39.7676 c 0 -32.6888 -1.77693 -39.7695 -9.97851 -39.7695 -8.03356 0 -9.28323 -4.2784 -6.41406 -21.959 6.63278 -40.873 -2.55359 -39.2227 218.29297 -39.2227 220.84658 0 211.65828 -1.6503 218.29101 39.2227 2.86919 17.6806 1.61949 21.959 -6.41406 21.959 -8.20156 0 -9.97656 7.0807 -9.97656 39.7695 l 0 39.7676 64.24023 0 64.24024 0 0 -39.7676 0 -39.7695 -24.47266 0 -24.47266 0 0 -38.1172 c 0 -33.4211 -2.82718 -42.6556 -22.94336 -74.9473 -21.31927 -34.2229 -22.92276 -40.0783 -22.65234 -82.7168 0.23127 -36.4712 4.98368 -59.6173 23.1582 -112.8047 12.57655 -36.805 21.62687 -70.1502 20.11133 -74.0996 -1.51547 -3.9494 -8.15056 -8.5901 -14.74414 -10.3144 -9.99229 -2.613 -15.25273 4.2923 -31.5957 41.4804 l -19.60743 44.6172 -34.69335 -11.8066 c -19.08099 -6.4931 -37.89467 -12.9741 -41.8086 -14.4024 -5.04268 -1.8402 -2.98114 -15.6367 7.07227 -47.3457 10.33932 -32.6106 12.26852 -45.9668 7.11523 -49.2461 -15.21282 -9.6806 -23.10985 -3.3564 -38.07226 30.4922 -26.49409 59.9361 -61.73939 87.1836 -112.77539 87.1836 -51.03599 0 -86.28326 -27.2475 -112.77735 -87.1836 -10.75424 -24.3287 -17.85838 -34.4396 -26.65234 -34.6074 z m 138.77344 305.3359 c 122.0759 0 144.78749 4.627 144.78749 4.627 l 2.70469 20.8226 c 0 0 -66.372 -0.975 -147.49218 -0.975 -131.97904 0 -143.77735 -1.5965 -143.77735 -1.5965 0 0 3.71485 -18.9102 3.71485 -20.3175 0 -1.4073 63.02743 -2.5606 140.0625 -2.5606 z m -13.23243 97.1953 c -74.30818 0.088 -144.7413 2.7003 -150.08007 8.0391 -7.9969 7.9969 -10.96423 243.95958 -3.16602 251.75778 2.2963 2.2966 78.69669 3.4432 169.7793 2.5489 l 165.60547 -1.625 1.66015 -121.57818 c 1.15475 -84.5063 -0.47295 -124.1498 -5.33789 -130.0117 -5.05219 -6.0875 -94.245 -9.2305 -178.46094 -9.1309 z m -240.01756 123.0606 c -26.512157 0 -27.531247 0.6806 -27.531247 18.3555 0 17.3348 -1.35949 18.3535 -24.472665 18.3535 l -24.47266 0 0 36.70898 0 36.709 64.240242 0 64.24217 0 0 -36.709 c 0 -32.63028 -1.35954 -36.70898 -12.23632 -36.70898 -9.51719 0 -12.23633 -4.0778 -12.23633 -18.3535 0 -17.6749 -1.02104 -18.3555 -27.53319 -18.3555 z m 507.81053 0 c -26.51215 0 -27.53125 0.6806 -27.53125 18.3555 0 14.2757 -2.71911 18.3535 -12.23633 18.3535 -10.8768 0 -12.23632 4.0787 -12.23632 36.70898 l 0 36.709 64.24023 0 64.24024 0 0 -36.709 0 -36.70898 -24.47266 0 c -23.11318 0 -24.47266 -1.0187 -24.47266 -18.3535 0 -17.6749 -1.01911 -18.3555 -27.53125 -18.3555 z M 82.040348 792.9013 l 0 37.1113 c 0 42.7883 5.956545 56.9748 29.216792 69.5977 l 0 0 c 25.11083 13.6274 489.13088 13.8945 515.42577 0.2969 24.42443 -12.6304 30.46875 -26.4942 30.46875 -69.8926 l 0 -37.1113 -30.59179 0 c -29.24599 0 -30.59917 0.739 -30.78516 16.8242 -0.10707 9.2538 -3.85202 21.6444 -8.32227 27.5332 -7.46255 9.8307 -25.28893 10.7051 -217.85546 10.7051 -192.56651 0 -210.39487 -0.8744 -217.85743 -10.7051 -4.4702 -5.8888 -8.21525 -18.2794 -8.32226 -27.5332 -0.18602 -16.0852 -1.53917 -16.8242 -30.78515 -16.8242 z"),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Mask), "Mask", GearTypes.Mask, "m 149.28993 42.03237 -11.07813 0.0156 -17.9707 30.00782 -4.61719 34.52539 10.38672 3.85156 c 0 0 16.52764 -9.67331 24.24219 -15.38672 l 6.94922 -40.99414 -7.91211 -12.01953 z M 78.83649 0 64.14899 9.78711 62.74274 18.8379 c 0 0 -1.80154 1.16273 -7.24219 5.77733 -3.89691 3.30525 -8.75068 7.45023 -10.78711 9.21094 l -3.70312 3.20117 6.02344 11.22071 c 3.95883 7.37341 6.42187 11.33007 6.42187 11.33007 l -3.2678 5.33452 c 0 0 -5.44156 -6.81926 -9.73806 -13.09233 C 33.25902 41.32155 31.9082 40.04854 31.9082 40.04854 l -7.05018 0.0108 c 0 0 3.89871 6.18407 8.18464 12.53554 2.96474 4.34118 9.67078 15.15707 9.67078 15.15707 0 0 0.97663 7.043 2.95313 18.3789 1.72665 9.90297 3.40211 18.26735 3.72265 18.58789 0.32054 0.32053 2.79131 -1.16751 5.49219 -3.30664 l 4.91211 -3.88867 1.51953 3.67187 c 1.27796 3.08529 2.35283 3.7477 6.71094 4.14453 9.83277 0.89535 11.71991 0.90718 19.29688 0.11524 6.85489 -0.71648 7.74894 -1.14493 9.08203 -4.36328 l 1.47656 -3.56836 4.91211 3.88867 c 2.70088 2.13914 5.17165 3.62718 5.49219 3.30664 0.32053 -0.32054 2.00222 -8.68492 3.73632 -18.58789 l 2.83985 -18.55274 17.09127 -27.41347 -7.0014 -0.11611 c 0 0 -1.3111 0.84334 -8.44339 11.15263 -8.69631 12.56997 -9.57513 13.66278 -9.57513 13.66278 l -2.67248 -5.2197 c 0 0 3.51556 -7.29394 5.49459 -10.97993 l 6.29965 -11.74356 -3.74389 -3.71764 c -2.39354 -2.10559 -7.24791 -6.25091 -10.78711 -9.21093 -4.88539 -4.08592 -6.9043 -5.07227 -6.9043 -5.07227 L 93.13336 9.86523 Z M 7.91379 41.51589 0 53.53664 6.94977 94.53125 c 7.71455 5.71341 24.24219 15.38672 24.24219 15.38672 L 41.57904 106.06514 36.9619 71.53969 18.99193 41.53319 Z m 121.41489 14.52706 c -160.273505 84.31719 -80.13675 42.15859 0 0 z M 72.9029 45.62891 l 12.0354 0.029 10.55835 13.90458 -0.80566 20.7117 -5.94952 -2.6783 c 0 0 0.095 -4.17204 0.095 -6.76192 0 -6.02649 -5 -11.45898 -5 -11.45898 l -5 -4.88281 -5 4.88281 c -4.58126 4.47347 -5 5.43249 -5 11.45898 0 5.17977 -0.26171 6.75391 -0.26171 6.75391 l -5.58311 2.91559 -0.91104 -20.92926 10.82227 -13.94531 1e-5 0 z"),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Kneepads), "Kneepads", GearTypes.Kneepads, "M 61.355474 0.00218981 C 51.266204 -0.04753019 40.915689 0.75003981 35 2.3322678 26.09395 4.7143068 14.321263 10.438985 12.447266 13.299065 c -0.851153 1.299024 -1.815223 5.556228 -2.142578 9.460938 l -0.595704 7.09961 -4.853515 0 -4.855469 0 0 15 0 14.999996 6.429688 0 6.427734 0 3.980469 18 -9.335938 0.10156 6.8125 27.898441 6.175781 0 6.177735 0 3.80664 5.52734 c 5.13454 7.45512 12.317291 12.91443 20.519535 15.5957 1.37856 0.45061 6.33086 0.68787 11.00586 0.52735 6.5121 -0.2236 9.55242 -0.83209 13 -2.60352 6.83369 -3.5113 11.32895 -7.42649 15.52539 -13.51953 l 3.80664 -5.52734 6.177736 0 6.17773 0 7.11328 -28.017581 -9.63867 0.0176 c 0 0 2.83586 -11.95828 3.98047 -18 l 6.42773 0 6.42969 0 0 -14.999996 0 -15 -4.86523 0 -4.86524 0 -0.5 -6.96875 c -0.28474 -3.97951 -1.19799 -8.037196 -2.13086 -9.460938 C 106.18955 9.6921148 93.313484 3.9696608 82.212894 1.6858038 76.890964 0.59085981 69.202684 0.04087881 61.355474 0.00220981 Z M 60.500004 14.205315 c 10.04562 0 12.90941 1.597715 17.58008 3.453125 8.52375 3.386033 13.2537 8.052223 18.11914 17.871093 3.914876 7.90056 4.236576 9.1574 4.267576 16.6875 0.0332 8.066116 -0.0341 8.284256 -7.136716 23.142576 -3.94368 8.25 -7.68379 17.28782 -8.31055 20.08398 -2.02141 9.018051 -6.69285 14.080111 -15.91797 17.248051 -6.50585 2.23414 -14.17428 1.48146 -21.19726 -2.08203 -7.519277 -3.8153 -9.985292 -7.06255 -12.265632 -16.140631 -0.89712 -3.57145 -4.530689 -12.37047 -8.074219 -19.55468 -3.54613 -7.18949 -6.763165 -15.19253 -7.154297 -17.80079 -1.486941 -9.915626 4.729595 -26.534316 12.578125 -33.624996 6.61367 -5.975045 13.695193 -9.283198 27.511723 -9.283198 z m -0.45703 6.130858 c -14.935144 0.14093 -29.255483 8.89576 -33.488286 21.31836 -1.985281 5.82631 -1.992986 15.710286 -0.01563 21.330076 0.846801 2.40665 3.349057 7.42516 5.560547 11.15234 2.21148 3.72719 5.552729 10.92719 7.423829 16 3.877782 10.513181 7.91702 15.023031 14.85351 16.582031 5.6762 1.27576 5.88883 1.27732 11.48047 0.0781 7.79147 -1.67098 11.58187 -5.71457 15.61914 -16.660161 1.8711 -5.07281 5.21235 -12.27281 7.42383 -16 5.38797 -9.08073 7.09961 -14.31981 7.09961 -21.724606 0 -9.14092 -2.4185 -15.10209 -8.66016 -21.34375 -6.19672 -6.19673 -11.28262 -8.69314 -20.88672 -10.25195 -2.13108 -0.34589 -4.27656 -0.5006 -6.41015 -0.48047 z M 43.94141 35.605703 a 5.1707187 5.1707187 0 0 1 5.169924 5.16992 5.1707187 5.1707187 0 0 1 -5.169924 5.17188 5.1707187 5.1707187 0 0 1 -5.171879 -5.17188 5.1707187 5.1707187 0 0 1 5.171879 -5.16992 z m 33.630864 0.13281 a 5.1707187 5.1707187 0 0 1 5.17187 5.16993 5.1707187 5.1707187 0 0 1 -5.17187 5.17187 5.1707187 5.1707187 0 0 1 -5.16993 -5.17187 5.1707187 5.1707187 0 0 1 5.16993 -5.16993 z m -39.95118 14.84961 a 5.1707187 5.1707187 0 0 1 5.169926 5.169926 5.1707187 5.1707187 0 0 1 -5.169926 5.16992 5.1707187 5.1707187 0 0 1 -5.169922 -5.16992 5.1707187 5.1707187 0 0 1 5.169922 -5.169926 z m 46.22657 0 a 5.1707187 5.1707187 0 0 1 5.17187 5.169926 5.1707187 5.1707187 0 0 1 -5.17187 5.16992 5.1707187 5.1707187 0 0 1 -5.16993 -5.16992 5.1707187 5.1707187 0 0 1 5.16993 -5.169926 z m -12.55078 33.939456 a 5.1707187 5.1707187 0 0 1 5.16992 5.17187 5.1707187 5.1707187 0 0 1 -5.16992 5.16992 5.1707187 5.1707187 0 0 1 -5.16993 -5.16992 5.1707187 5.1707187 0 0 1 5.16993 -5.17187 z m -20.85938 0.0898 a 5.1707187 5.1707187 0 0 1 5.16992 5.16992 5.1707187 5.1707187 0 0 1 -5.16992 5.17188 5.1707187 5.1707187 0 0 1 -5.169924 -5.17188 5.1707187 5.1707187 0 0 1 5.169924 -5.16992 z"),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Backpack), "Backpack", GearTypes.Backpack, "m 46.35956 158.37233 c -0.61399 -0.20686 1.63063 -5.55061 4.98805 -11.875 l 6.10442 -11.49886 0.024 -22.75337 0.024 -22.753352 -5.70742 -13.93506 c -3.13908 -7.66429 -5.35174 -14.29074 -4.91704 -14.72544 1.79688 -1.79688 11.88904 -4.05475 21.35657 -4.77801 10.34919 -0.79061 28.32016 2.0255 29.97095 4.69654 0.41356 0.66916 -2.10669 7.26474 -5.60056 14.65682 l -6.3525 13.44017 0 22.829612 0 22.82962 6.79027 11.76095 6.79026 11.76095 -26.17731 0.36029 c -14.39751 0.19815 -26.67967 0.19101 -27.29366 -0.0159 z M 33.7305 155.81165 c -2.51036 -1.33245 -5.65004 -4.62463 -7.41129 -7.77126 -2.82698 -5.05065 -3.03862 -6.61566 -2.82644 -20.90022 0.12614 -8.49242 1.0487 -20.88598 2.05013 -27.541242 3.07325 -20.42413 9.52216 -37.1572 13.96999 -36.24818 1.09645 0.22409 4.06331 5.30902 6.796 11.64772 l 4.85001 11.25 0.0455 24.848972 0.0455 24.84896 -5.8465 11.08854 c -3.21547 6.09869 -6.17738 11.08853 -6.5819 11.08853 -0.40453 0 -2.69548 -1.04032 -5.091 -2.31182 z M 99.02239 147.10174 92.5 136.08445 l 0 -24.43812 0 -24.438142 5.73766 -12.11231 c 4.23072 -8.93114 6.2826 -12.01188 7.8125 -11.72988 3.17987 0.58615 9.67833 15.10419 12.00513 26.82029 2.75162 13.855292 4.82407 39.476992 3.82569 47.297152 -1.01527 7.95238 -3.80724 13.81839 -7.97259 16.75065 -7.22761 5.08798 -7.81921 4.80453 -14.886 -7.13235 z m -89.49826 7.2287 C 2.9332 152.35703 0 148.4056 0 141.50013 c 0 -5.97205 5.08015 -33.74649 7.24081 -39.58731 0.67387 -1.82164 3.17472 -3.659542 6.90774 -5.076572 L 20 94.615078 l 0 2.77462 c 0 1.52604 -0.56433 5.831052 -1.25407 9.566692 -3.45111 18.69129 -3.67693 34.15008 -0.66071 45.22958 0.8325 3.05806 0.6104 3.42563 -2.01221 3.33006 -1.62141 -0.0591 -4.5684 -0.59261 -6.54888 -1.18559 z m 120.77261 -33.22467 c -1.21543 -8.66157 -1.0999 -10.03895 1.28435 -15.3125 2.08059 -4.60193 2.7264 -9.014332 3.13727 -21.434772 0.56907 -17.20227 -1.21188 -30.68289 -6.4335 -48.69709 -2.89667 -9.993343 -2.96317 -10.904643 -1.1859 -16.250003 3.70804 -11.1523203 4.76134 -10.5903003 9.56409 5.1032 2.39583 7.828623 4.95628 17.046363 5.68989 20.483863 4.27151 20.01501 5.20681 48.8213 1.98657 61.184622 -1.93806 7.4407 -10.14786 24.44038 -11.8032 24.44038 -0.49721 0 -1.50502 -4.28297 -2.23957 -9.5177 z M 23.76025 73.435968 c 0.0596 -12.70677 4.42011 -33.91051 9.44865 -45.945503 1.65973 -3.97229 2.24471 -4.49568 3.17224 -2.83827 1.38187 2.46927 9.86886 26.693293 9.86886 28.168233 0 0.57795 -1.96895 1.7628 -4.37544 2.63299 -6.59572 2.38505 -11.24298 6.91752 -14.24297 13.8912 -2.84256 6.6077 -3.88832 7.71288 -3.87134 4.09135 z m 93.72569 -3.81814 c -3.23995 -7.53149 -6.25859 -10.53909 -14.02641 -13.97517 l -5.88433 -2.60291 4.20968 -11.52064 c 6.645 -18.185383 6.97165 -18.890033 8.18727 -17.661693 2.84878 2.87856 8.72783 24.570533 10.07313 37.166963 0.79451 7.43925 1.14848 13.82199 0.78661 14.18386 -0.36189 0.36189 -1.86756 -2.1538 -3.34595 -5.59041 z m -72.20235 -32.8791 c -3.07963 -8.825593 -4.87514 -15.773723 -4.24026 -16.408603 4.99227 -4.99227 40.15572 -6.99881 54.44692 -3.10692 4.05089 1.10317 7.80568 2.46015 8.34398 3.01551 0.5383 0.55536 -1.58287 7.94318 -4.71369 16.417373 -5.43569 14.71275 -5.83038 15.37298 -8.75186 14.63974 -4.13559 -1.03797 -27.37893 -1.08433 -34.22664 -0.0683 l -5.51704 0.81861 -5.34141 -15.30743 z m 20.51999 -4.24026 c 1.03125 -1.031253 4.04463 -1.875003 6.69642 -1.875003 2.65179 0 5.66518 0.84375 6.69643 1.875003 2.17786 2.17786 3.30357 2.39083 3.30357 0.625 0 -3.033753 -5.146 -6.250003 -10 -6.250003 -4.854 0 -10 3.21625 -10 6.250003 0 1.76583 1.12571 1.55286 3.30358 -0.625 z M 116.25 19.525115 c -0.7668 -1.13815 -4.99437 -3.38209 -13.125 -5.28149 -3.4375 -0.80303 -6.73175 -1.89346 -7.32055 -2.42316 -0.97659 -0.87857 7.06776 -9.1629003 11.2534 -11.5891103 1.61086 -0.93375 10.4483 1.05532 18.80478 4.23245 l 3.27367 1.24465 -3.17545 3.395 c -1.7465 1.8672603 -4.22605 5.4305403 -5.694 7.4575103 -2.45303 3.38719 -2.68872 4.93547 -4.01685 2.96415 z"),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Gloves), "Glove", GearTypes.Gloves, "m 41.475538 0 c -7.27698 0 -8.03827 4.084271 -3.86133 20.738281 2.21437 8.828987 3.01516 10.494529 4.6875 9.751953 1.1093 -0.492563 4.07111 -1.139211 6.58203 -1.4375 l 4.56641 -0.542968 -2.9043 -10.816407 C 46.071678 1.030233 45.543518 0 41.475538 0 Z m 26.75 2.632812 c -0.32905 0.0054 -0.67103 0.03375 -1.02539 0.08398 -4.30926 0.610882 -6.58907 8.318664 -5.49024 18.5625 l 0.86915 8.095703 7.38476 0.04297 7.38672 0.04297 -0.70508 -7.542969 C 75.314948 7.654077 73.161358 2.552551 68.225538 2.632809 Z m -49.98437 9.898438 c -1.36263 -0.007 -2.67204 1.009655 -3.99024 3.021484 -2.39337 3.652737 -1.49827 9.175298 3.21484 19.830076 l 2.625 5.9336 3.22071 -2.53321 c 1.77122 -1.39324 4.33069 -2.5332 5.6875 -2.5332 2.06452 0 2.32664 -0.56074 1.61328 -3.4375 -0.46883 -1.890625 -2.63844 -7.09375 -4.82227 -11.5625 -2.85821 -5.848728 -5.27787 -8.707016 -7.54882 -8.71875 z m 52.45507 20.13867 c -0.78223 -0.0201 -1.65273 0.0162 -2.62695 0.0879 l -5 0.36719 -0.38086 5.9375 c -0.31128 4.85115 -0.81295 5.9375 -2.74023 5.9375 -1.74636 0 -2.79302 -1.5417 -4.0293 -5.9375 -1.54523 -5.49424 -1.99352 -5.96404 -6.00977 -6.30469 -2.38713 -0.20247 -5.3552 0.37318 -6.5957 1.28125 -1.99454 1.46006 -2.09682 2.35917 -0.88477 7.76758 1.53927 6.86857 1.02512 9.44336 -1.88867 9.44336 -1.2041 0 -3.01902 -2.48839 -4.61718 -6.33398 -2.40502 -5.78714 -2.91134 -6.26673 -5.86719 -5.5293 -4.22308 1.05359 -7.61133 4.17358 -7.61133 7.00976 0 1.24299 1.11158 5.08119 2.4707 8.5293 2.31099 5.86307 2.31657 10.07422 0.0137 10.07422 -0.54862 0 -2.47993 -2.53125 -4.29297 -5.625 -3.75322 -6.4044 -5.7669 -6.91279 -10.12305 -2.55664 -3.7667996 3.76683 -3.7680596 3.7898 -0.043 12.21289 1.6645 3.76372 3.65558 9.17817 4.42383 12.03125 0.76825 2.85307 1.58336 5.1875 1.81055 5.1875 0.2272 0 5.40798 -0.85494 11.51367 -1.90039 22.70565 -3.88778 52.49129 -15.99364 52.22265 -21.22461 -0.0706 -1.375 -0.81174 -8.125 -1.64648 -15 -1.51005 -12.43688 -2.62203 -15.31427 -8.09766 -15.45508 z M 4.8583484 38.02734 c -0.79009 0.0287 -1.61182 0.29406 -2.5039 0.77149 -3.19251004 1.70858 -3.13321004 7.38575 0.14648 13.81445 l 2.55859 5.01172 3.64649 -3.06836 C 10.711518 52.86911 13.049498 51.2566 13.901318 50.97266 14.986758 50.61085 14.448378 48.74962 12.104448 44.75 9.3074884 39.97736 7.2286384 37.94114 4.8583484 38.02734 Z M 111.74116 53.83008 c -2.06497 -0.0738 -4.64339 0.56026 -7.49218 1.91211 -4.593612 2.17981 -15.561642 16.98301 -15.556642 20.99609 0.002 1.2997 1.22102 4.80385 2.71093 7.78711 l 2.70899 5.42383 -3.28125 8.46289 c -1.80412 4.65455 -3.6541 10.43164 -4.11328 12.83789 -0.83097 4.35434 -0.82455 4.36392 1.75195 2.05469 1.4238 -1.2761 6.30487 -9.9381 10.8457 -19.24805 4.540822 -9.30995 10.478332 -20.02883 13.193362 -23.82031 5.11596 -7.14438 5.84198 -9.95509 3.64063 -14.06836 -0.79316 -1.48203 -2.34323 -2.26408 -4.40821 -2.33789 z m -29.593752 16.43359 -8.91406 4.78906 C 59.562438 82.39699 34.359828 90 23.686478 90 c -1.97698 0 -3.94356 0.56334 -4.36914 1.25195 -0.42559 0.68862 0.67002 5.98184 2.43359 11.76367 3.21041 10.52527 9.57873 20.3414 14.39063 22.18165 1.18377 0.45273 7.82893 1.22682 14.76757 1.71875 l 12.61524 0.89453 3.83594 4.77148 c 2.10905 2.62443 3.83398 5.2483 3.83398 5.83008 0 0.58178 -2.67188 3.60792 -5.9375 6.72656 l -5.9375 5.66992 -12.5 -0.82617 c -6.875 -0.4553 -12.68649 -0.68555 -12.91406 -0.51172 -0.22758 0.17382 0.20782 1.47639 0.96679 2.89453 1.54998 2.89618 5.13819 5.09324 10.69727 6.55274 6.49607 1.7055 23.4434 0.36236 29.47656 -2.33594 10.26235 -4.58979 10.48638 -5.23514 8.67383 -25.05273 -1.50957 -16.50508 -1.459 -17.71661 1.16992 -27.83008 l 2.75 -10.57422 -2.74609 -11.42969 -2.7461 -11.43164 z m -49.35156 58.98242 c -1.11844 -0.0242 -1.54957 0.80842 -2.00586 3.08985 -0.40175 2.00854 -0.40751 5.6489 -0.0117 8.08789 0.68077 4.19507 1.0665 4.50148 7.13086 5.66992 3.52577 0.6793 9.78516 0.9595 13.91016 0.62305 6.15512 -0.50205 8.16331 -1.26777 11.20312 -4.26758 l 3.70508 -3.65625 -4.23047 -4.36328 c -4.21742 -4.35128 -4.261 -4.36359 -14.95312 -4.20508 -5.8982 0.0874 -11.91764 -0.22431 -13.375 -0.69141 -0.55178 -0.17685 -1.00023 -0.27905 -1.37305 -0.28711 z"),
                    new GearFilterItem(query.Count(x => x.GearType == GearTypes.Holster), "Holster", GearTypes.Holster, "M 44.22315 113.53681 34 99.310457 l 0.003 -21.52365 0.003 -21.52364 7.70009 -4.7136 c 4.23505 -2.59248 7.80935 -4.60435 7.94288 -4.47082 0.13353 0.13354 2.44709 5.40466 5.14124 11.7136 l 4.89846 11.47082 3.90569 0.25835 c 4.69172 0.31035 13.73603 -3.95203 16.62061 -7.83292 l 1.91362 -2.57456 -5.64252 -12.75032 c -3.10339 -7.01267 -5.39817 -13.38711 -5.09951 -14.16541 0.29867 -0.7783 3.37138 -5.46118 6.82826 -10.4064 l 6.28523 -8.99131 6.59501 -0.0187 C 101.80891 13.751497 101 9.2829368 101 68.498797 l 0 51.078143 -4.88878 4.09312 -4.88878 4.09312 -18.38807 0 -18.38807 0 -10.22315 -14.22636 z M 50 89.263167 l 0 -18.5 -2.5 0 -2.5 0 0 15.01402 c 0 13.87422 0.17081 15.277733 2.25 18.487633 1.2375 1.91047 2.3625 3.47916 2.5 3.48597 0.1375 0.007 0.25 -8.312623 0.25 -18.487623 z M 1.25 88.100887 C 0.35341 87.739107 0 84.398897 0 76.286827 c 0 -9.39046 0.26842 -11.41269 1.58179 -11.91667 0.86998 -0.33385 7.16998 -0.60699 14 -0.60699 l 12.41821 0 0 12.5 0 12.5 -12.75 -0.0789 c -7.0125 -0.0434 -13.3125 -0.30592 -14 -0.58333 z m 108.47011 -9.59122 c -1.52894 -5.63558 -3.04393 -11.259 -3.36663 -12.4965 -0.57815 -2.21704 -0.44707 -2.25 8.9481 -2.25 5.24417 0 10.24665 0.27314 11.11663 0.60699 1.31309 0.50388 1.58179 2.52412 1.58179 11.89301 0 12.94654 0.33197 12.50198 -9.33179 12.4965 l -6.16821 -0.004 -2.77989 -10.2465 z M 50.15341 37.296127 C 43.40366 21.522597 37.63473 7.9748668 37.33358 7.1900668 c -0.44897 -1.16999 1.04711 -1.4256 8.30943 -1.41971 l 8.85699 0.007 10.75 26.0248602 c 5.9125 14.31366 10.75 26.90005 10.75 27.96974 0 2.61816 -4.09027 5.13414 -9.30158 5.72153 l -4.27272 0.4816 -12.27229 -28.67916 z m 19.27516 21.89561 C 70.29286 58.327457 71 57.234597 71 56.763167 c 0 -0.47143 -0.70714 -1.56429 -1.57143 -2.42857 -0.86428 -0.86429 -1.95714 -1.57143 -2.42857 -1.57143 -0.47143 0 -1.56429 0.70714 -2.42857 1.57143 C 63.70714 55.198877 63 56.291737 63 56.763167 c 0 0.47143 0.70714 1.56429 1.57143 2.42857 0.86428 0.86429 1.95714 1.57143 2.42857 1.57143 0.47143 0 1.56429 -0.70714 2.42857 -1.57143 z M 22.19353 45.669987 c -8.80818 -4.71939 -11.60934 -5.80662 -12.67714 -4.92042 -1.02672 0.8521 -2.39267 0.83134 -5.44353 -0.0827 -4.88825 -1.46456 -4.81082 -0.46189 -1.71084 -22.15187 C 4.18611 5.7521668 4.98123 2.4881368 6.55639 1.2967968 c 2.82122 -2.13377996 3.47192 -2.00288996 15.96444 3.21131 10.77967 4.49927 11.44818 4.94851 12.91294 8.6774102 0.8496 2.16288 1.36285 4.11438 1.14056 4.33667 -0.22229 0.22229 -5.62762 -1.49739 -12.01183 -3.82151 C 18.17829 11.376557 12.77929 9.6523468 12.56473 9.8690868 12.35018 10.085837 11.31699 15.100677 10.26876 21.013177 l -1.90588 10.75 2.72728 0 c 1.5671 0 8.27961 3.19049 15.77935 7.5 7.17864 4.125 13.62418 7.5 14.32342 7.5 0.69923 0 -0.38425 1.125 -2.40774 2.5 -2.0235 1.375 -4.04046 2.49208 -4.48214 2.48239 -0.44168 -0.01 -5.89096 -2.74369 -12.10952 -6.07557 z m 40.55723 -29.08909 c -1.62851 -3.8747 -1.63507 -4.28809 -0.095 -5.98983 0.90982 -1.0053502 2.59698 -1.8236802 3.74924 -1.8185202 2.27761 0.0102 12.61496 5.5732102 12.56321 6.7608502 -0.0175 0.40137 -0.71128 1.62897 -1.54175 2.72799 -1.50509 1.9918 -1.5222 1.99117 -5.3223 -0.19589 C 68.22755 15.834407 66 16.344457 66 19.463167 c 0 2.5636 -1.53126 1.20528 -3.24924 -2.88227 z"),
                };
            }

            SwitchGearTypeCommand = new DelegateCommand<object>(SwitchGearType);
        }

        private void UpdateFilters(int obj)
        {
            foreach (var item in GearTypeFilters.Where(item => item.GearType == SelectedGearType))
            {
                item.Update(obj);
            }
        }

        public ObservableCollection<GearFilterItem> GearTypeFilters { get; set; }

        public DelegateCommand<object> SwitchGearTypeCommand { get; set; }

        private void SwitchGearType(object args)
        {
            if (args == null)
            {
                SelectedGearType = GearTypes.None;
            }
            else
            {
                SelectedGearType = (GearTypes)args;
            }
     
            _eventAggregator.GetEvent<SelectedGearChangedEvent>().Publish(SelectedGearType);
        }

        private void SelectedGearChanged(GearTypes obj)
        {
            throw new NotImplementedException();
        }
    }
}
